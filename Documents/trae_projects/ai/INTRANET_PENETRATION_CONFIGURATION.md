# OpenAgents 内网穿透配置指南

## 配置前准备

- ✅ 已确认 OpenAgents 网络服务正常运行在本地 8700 端口
- ✅ 已获取本地 IP 地址：`192.168.91.179`

## 配置步骤详解

根据您提供的内网穿透配置界面截图，以下是每个字段的正确填写方法：

### 1. 内网主机
- **填写内容**：`192.168.91.179`
- **说明**：这是您的本地 IP 地址，用于指向运行 OpenAgents 服务的计算机

### 2. 内网端口
- **选择方式**：`自定义`
- **填写内容**：`8700`
- **说明**：这是 OpenAgents 服务正在使用的端口

### 3. 映射协议
- **选择**：`HTTP`
- **说明**：OpenAgents 服务使用 HTTP 协议通信

### 4. 外网域名
- **选择**：从下拉菜单中选择一个可用的免费域名
- **说明**：这是您将用于外部访问的域名

### 5. 外网端口
- **选择**：`动态端口（免费）`
- **说明**：免费版本通常使用动态端口，系统会自动分配

### 6. 映射名称
- **填写内容**：`OpenAgents`（或自定义名称）
- **说明**：用于标识此映射的名称，方便管理

### 7. 更多设置
- 保持默认即可，无需额外配置

## 配置完成后的操作

1. 点击 **确定** 按钮保存映射配置
2. 在映射列表中查看生成的外网地址（格式：`http://xxx.vicp.fun:端口号`）
3. 使用生成的外网地址测试访问 OpenAgents 服务

## 验证连接

配置完成后，您可以通过以下方式验证连接：

1. **本地验证**（已确认正常）：`http://localhost:8700`
2. **内网验证**：`http://192.168.91.179:8700`（在同一局域网内的设备上测试）
3. **外网验证**：使用生成的外网地址（在手机 4G/5G 网络下测试）

## 常见问题排查

如果配置完成后无法访问，请检查：

1. OpenAgents 服务是否正常运行
   ```bash
   # 检查服务状态
   curl http://localhost:8700
   ```

2. Windows 防火墙是否允许 8700 端口入站

3. 本地 IP 地址是否正确（使用 `ipconfig` 命令再次确认）

4. 映射配置是否与上述步骤一致

## 完整配置截图参考

```
内网主机：192.168.91.179
内网端口：8700（自定义）
映射协议：HTTP
外网域名：（选择一个可用的免费域名）
外网端口：动态端口（免费）
映射名称：OpenAgents
```

## 配置成功后

配置成功后，您可以使用生成的外网地址：
- 在 OpenAgents Studio 中连接到您的网络
- 与团队成员共享访问权限
- 从外部网络访问您的 OpenAgents 服务

如果您在配置过程中遇到任何问题，请参考 `INTRANET_CONNECTION_TROUBLESHOOTING.md` 文件获取更多帮助。